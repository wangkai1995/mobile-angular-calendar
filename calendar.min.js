!function(t){try{t=angular.module("calendar-template")}catch(e){t=angular.module("calendar-template",[])}t.run(["$templateCache",function(t){t.put("calendar/index.html",'\n<div id="calendar-share-warp">\n\t<!--遮罩层-->\n\t<div class="calendar-share-container" ng-class="{\'calendar-container-active\':template.templateShow}">\n\t\t <!--内容层-->\n\t\t <div class="calendar-container">\n\t\t\t<!--头部-->\n\t\t\t<div class="calendar-head">\n\t\t\t\t<div class="calendar-head-item">\n\t\t\t\t \t<span ng-click="template.reduceYear(1)">&lt;&nbsp;</span>\n\t\t\t\t \t<span class="green">{{template.year}}</span>\n\t\t\t\t \t<span ng-click="template.addYear(1)">&nbsp;&gt;</span>\n\t\t\t\t </div>\n\t\t\t\t<div class="calendar-head-item">\n\t\t\t\t\t<span ng-click="template.reduceMonth(1)">&lt;&nbsp;</span>\n\t\t\t\t \t<span class="green">{{template.month}}</span>\n\t\t\t\t \t<span ng-click="template.addMonth(1)">&nbsp;&gt;</span>\n\t\t\t\t</div>\t\t\n\t\t\t</div> \t\t\n\t\t\n\t\t\t<!--内容-->\n\t\t\t<div class="calendar-content">\n\t\t\t\t<div class="week-content">\n\t\t\t\t\t<span>一</span>\n\t\t\t\t\t<span>二</span>\n\t\t\t\t\t<span>三</span>\n\t\t\t\t\t<span>四</span>\n\t\t\t\t\t<span>五</span>\n\t\t\t\t\t<span>六</span>\n\t\t\t\t\t<span>日</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="date-content">\n\t\t\t\t\t<span ng-repeat="(key, value) in template.date" ng-class="{\'grey\':value.monthFlag !== \'now\' && value.active\n\t\t\t\t\t\t  , \'active\':value.date === template.check && value.active\n\t\t\t\t\t\t  , \'overdue\': !value.active}" ng-click="template.checkDate(value)">\n\t\t\t\t\t\t{{value.value}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t<!--底部-->\n\t\t\t<div class="calendar-footer">\n\t\t\t\t<div class="footer-button" ng-click="template.hide()"><span>取消</span></div>\n\t\t\t\t<div class="footer-button" ng-click="template.determine()"><span>确定</span></div>\n\t\t\t</div>\n\t\t </div>\n\n\t</div>\n\n</div>\n')}])}(),angular.module("mobile-calendar",[]).directive("calendar",require("./directive/index.js")),module.exports=["$window","$document","$timeout","$templateCache","$compile","$filter",function(t,e,a,n,c,l){return{scope:!1,restrict:"EA",link:function(t,o,i){var d=function(){},r=i.calendar,f=t[r],g={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],s={};s[r]={},s[r].confg={default:angular.isDefined(f.default)?f.default:new Date,maxDate:angular.isDefined(f.maxDate)?f.maxDate:null,minDate:angular.isDefined(f.minDate)?f.minDate:null,outFormat:angular.isDefined(f.outFormat)?f.outFormat:"yyyy-MM-dd",changeYear:!angular.isDefined(f.changeYear)||f.changeYear,changeMonth:!angular.isDefined(f.changeMonth)||f.changeMonth,clickDateFlag:!angular.isDefined(f.clickDateFlag)||f.clickDateFlag,clickDateHide:!angular.isDefined(f.clickDateHide)||f.clickDateHide,template:angular.isDefined(f.template)?n.get(f.template)?n.get(f.template):f.template:n.get("calendar/index.html")},s[r].callback={onInit:f.onInit?f.onInit:d,onBackObj:f.onBackObj?f.onBackObj:d,onShow:f.onShow?f.onShow:d,onHide:f.onHide?f.onHide:d,onClickDate:f.onClickDate?f.onClickDate:d,onChangeDate:f.onChangeDate?f.onChangeDate:d},s[r].module=i.ngModel,t.template={templateShow:!1,check:"",year:"",month:"",date:[]},s[r].method={},s[r].method.flag=r,s[r].method.show=function(){r=this.flag,x(s[r].callback.onShow),I()},s[r].method.hide=function(){r=this.flag,C()},s[r].method.setDate=function(e,a){r=this.flag,m(e)&&H(e)&&(s[r].confg.default=e,t.template.check=e,s[r].callback.onChangeDate(e),B(),a&&S()),I()},s[r].method.resetConfg=function(t){r=this.flag,s[r].confg.default=angular.isDefined(t.default)?t.default:s[r].confg.default,s[r].confg.maxDate=angular.isDefined(t.maxDate)?t.maxDate:s[r].confg.maxDate,s[r].confg.minDate=angular.isDefined(t.minDate)?t.minDate:s[r].confg.minDate,s[r].confg.outFormat=angular.isDefined(t.outFormat)?t.outFormat:s[r].confg.outFormat,s[r].confg.changeYear=angular.isDefined(t.changeYear)?t.changeYear:s[r].confg.changeYear,s[r].confg.changeMonth=angular.isDefined(t.changeMonth)?t.changeMonth:s[r].confg.changeMonth,s[r].confg.clickDateFlag=angular.isDefined(t.clickDateFlag)?t.clickDateFlag:s[r].confg.clickDateFlag,s[r].confg.clickDateHide=angular.isDefined(t.clickDateHide)?t.clickDateHide:s[r].confg.clickDateHide,B(),I()};var m=function(t){return t instanceof Date||void h("不是时间类型")},h=function(t){throw new Error(t)},p=function(t,e){if(m(t)){var a=t.getFullYear(),n=t.getMonth()+e,c=t.getDate();return new Date(a,n,c)}},D=function(t,e){if(m(t)){if(0!==e&&e>0&&e<31){var a=t.getFullYear(),n=t.getMonth(),c=e;return new Date(a,n,c)}h("设置的日期有错误，不能小于等于0 不能大于31")}},v=function(t){var e=0;if(m(t)){var a=t.getFullYear(),n=t.getMonth()+1;e=new Date(a,n,0).getDate()}return e},k=function(t){var e="";if(m(t)){switch(t.getDay()){case 1:e="Monday";break;case 2:e="Tuesday";break;case 3:e="Wednesday";break;case 4:e="Thursday";break;case 5:e="Friday";break;case 6:e="Saturday";break;case 0:e="Sunday"}return e}},w=function(e){s[r].callback.onClickDate(e),e.active&&(s[r].confg.clickDateFlag?(s[r].confg.default=e.date,s[r].check=e.date,S(),s[r].callback.onChangeDate(e),s[r].confg.clickDateHide&&C()):t.template.check=e.date)},y=function(){s[r].confg.default=t.template.check,S(),s[r].callback.onChangeDate(t.template.check),s[r].confg.clickDateHide&&C()},b=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeYear){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e+t,a,n),B()}},F=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeYear){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e-t,a,n),B()}},M=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeMonth){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e,a+t,n),B()}},Y=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeMonth){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e,a-t,n),B()}},S=function(){var e=l("date")(s[r].confg.default,s[r].confg.outFormat);t[s[r].module]=e},x=function(n){var l=c(s[r].confg.template)(t);e.find("body").append(l),a(function(){t.template.templateShow=!0,n()},100)},C=function(){var n=angular.element(e.find("body")[0].lastChild);t.template.templateShow=!1,a(function(){n[0].id.indexOf("calendar-share-warp")!==-1?angular.element(n).remove():(n=document.getElementById("calendar-share-warp"),angular.element(n).remove()),s[r].callback.onHide()},200)},H=function(t){return!(s[r].confg.minDate&&m(s[r].confg.minDate)&&t<s[r].confg.minDate)&&!(s[r].confg.maxDate&&m(s[r].confg.maxDate)&&t>s[r].confg.maxDate)},$=function(t,e,a){for(var n=v(p(s[r].confg.default,-1)),c=g[k(D(s[r].confg.default,1))],l=c-1,o=0;l>0;l--,o++){var i={};i.monthFlag="before",i.week=u[l-1],l===c?(i.value=n,i.date=new Date(e,a-2,n-o)):(i.value=n-o,i.date=new Date(e,a-2,n-o)),i.active=H(i.date),t.push(i)}return t.reverse(),t},T=function(e,a,n){for(var c=v(s[r].confg.default),l=g[k(D(s[r].confg.default,1))],o=l,i=s[r].confg.default.getDate(),d=0;d<c;d++){var f={};0===d||(o++,o>7&&(o=1)),f.monthFlag="now",f.week=u[o],f.value=d+1,f.date=new Date(a,n-1,d+1),d+1===i&&(f.now=!0,t.template.check=f.date),f.active=H(f.date),e.push(f)}return e},j=function(t,e,a){for(var n=p(s[r].confg.default,1),c=g[k(D(n,1))],l=t.length,o=l,i=0;o<42;o++,i++){var d={};o!==l&&(c++,c>7&&(c=1)),d.monthFlag="atter",d.week=u[c],d.value=i+1,d.date=new Date(e,a,i+1),d.active=H(d.date),t.push(d)}return t},B=function(){var e=[],a=s[r].confg.default.getFullYear(),n=s[r].confg.default.getMonth()+1;e=$(e,a,n),e=T(e,a,n),e=j(e,a,n),t.template.year=a,t.template.month=n,t.template.date=e},I=function(){t.template.hide=C,t.template.checkDate=w,t.template.determine=y,t.template.addYear=b,t.template.reduceYear=F,t.template.addMonth=M,t.template.reduceMonth=Y},O=function(t,e){S(),o[0].setAttribute("readonly",!0),o[0].className="user-select-off",o[0].onclick=function(e){r=angular.element(e.target)[0].getAttribute("calendar"),t(),B(),x(s[r].callback.onShow),I()},e(s[r].method)};O(s[r].callback.onInit,s[r].callback.onBackObj)}}}];