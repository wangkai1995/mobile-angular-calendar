!function(t){try{t=angular.module("calendar-template")}catch(e){t=angular.module("calendar-template",[])}t.run(["$templateCache",function(t){t.put("calendar/index.html",'\n<div id="calendar-share-warp">\n\t<!--遮罩层-->\n\t<div class="calendar-share-container" ng-class="{\'calendar-container-active\':template.templateShow}">\n\t\t <!--内容层-->\n\t\t <div class="calendar-container">\n\t\t\t<!--头部-->\n\t\t\t<div class="calendar-head">\n\t\t\t\t<div class="calendar-head-item">\n\t\t\t\t \t<span ng-click="template.reduceYear(1)">&lt;&nbsp;</span>\n\t\t\t\t \t<span class="green">{{template.year}}</span>\n\t\t\t\t \t<span ng-click="template.addYear(1)">&nbsp;&gt;</span>\n\t\t\t\t </div>\n\t\t\t\t<div class="calendar-head-item">\n\t\t\t\t\t<span ng-click="template.reduceMonth(1)">&lt;&nbsp;</span>\n\t\t\t\t \t<span class="green">{{template.month}}</span>\n\t\t\t\t \t<span ng-click="template.addMonth(1)">&nbsp;&gt;</span>\n\t\t\t\t</div>\t\t\n\t\t\t</div> \t\t\n\t\t\n\t\t\t<!--内容-->\n\t\t\t<div class="calendar-content">\n\t\t\t\t<div class="week-content">\n\t\t\t\t\t<span>一</span>\n\t\t\t\t\t<span>二</span>\n\t\t\t\t\t<span>三</span>\n\t\t\t\t\t<span>四</span>\n\t\t\t\t\t<span>五</span>\n\t\t\t\t\t<span>六</span>\n\t\t\t\t\t<span>日</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="date-content">\n\t\t\t\t\t<span ng-repeat="(key, value) in template.date" ng-class="{\'grey\':value.monthFlag !== \'now\' && value.active\n\t\t\t\t\t\t  , \'active\':value.date === template.check && value.active\n\t\t\t\t\t\t  , \'overdue\': !value.active}" ng-click="template.checkDate(value)">\n\t\t\t\t\t\t{{value.value}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t\n\t\t\t<!--底部-->\n\t\t\t<div class="calendar-footer">\n\t\t\t\t<div class="footer-button" ng-click="template.hide()"><span>取消</span></div>\n\t\t\t\t<div class="footer-button" ng-click="template.determine()"><span>确定</span></div>\n\t\t\t</div>\n\t\t </div>\n\n\t</div>\n\n</div>\n')}])}(),angular.module("wk-calendar",[]).directive("calendar",require("./directive/index.js")),module.exports=["$window","$document","$timeout","$templateCache","$compile","$filter",function(t,e,a,n,c,l){return{scope:!1,restrict:"EA",link:function(t,o,d){var i=function(){},r=d.calendar,f=t[r],u={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7},g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],s={};s[r]={},s[r].confg={default:angular.isUndefined(f.default)?new Date:f.default,maxDate:angular.isUndefined(f.maxDate)?null:f.maxDate,minDate:angular.isUndefined(f.minDate)?null:f.minDate,outFormat:angular.isUndefined(f.outFormat)?"yyyy-MM-dd":f.outFormat,changeYear:!!angular.isUndefined(f.changeYear)||f.changeYear,changeMonth:!!angular.isUndefined(f.changeMonth)||f.changeMonth,clickDateFlag:!!angular.isUndefined(f.clickDateFlag)||f.clickDateFlag,clickDateHide:!!angular.isUndefined(f.clickDateHide)||f.clickDateHide},s[r].callback={onInit:f.onInit?f.onInit:i,onBackObj:f.onBackObj?f.onBackObj:i,onShow:f.onShow?f.onShow:i,onHide:f.onHide?f.onHide:i,onClickDate:f.onClickDate?f.onClickDate:i,onChangeDate:f.onChangeDate?f.onChangeDate:i},s[r].module=d.ngModel,t.template={templateShow:!1,check:"",year:"",month:"",date:[]},s[r].method={},s[r].method.flag=r,s[r].method.show=function(){r=this.flag,B(),U(s[r].callback.onShow)},s[r].method.hide=function(){r=this.flag,x()},s[r].method.setDate=function(e,a){r=this.flag,h(e)&&C(e)&&(s[r].confg.default=e,t.template.check=e,s[r].callback.onChangeDate(e),j(),a&&S()),B()},s[r].method.resetConfg=function(t){r=this.flag,s[r].confg.default=angular.isUndefined(t.default)?s[r].confg.default:t.default,s[r].confg.maxDate=angular.isUndefined(t.maxDate)?s[r].confg.maxDate:t.maxDate,s[r].confg.minDate=angular.isUndefined(t.minDate)?s[r].confg.minDate:t.minDate,s[r].confg.outFormat=angular.isUndefined(t.outFormat)?s[r].confg.outFormat:t.outFormat,s[r].confg.changeYear=angular.isUndefined(t.changeYear)?s[r].confg.changeYear:t.changeYear,s[r].confg.changeMonth=angular.isUndefined(t.changeMonth)?s[r].confg.changeMonth:t.changeMonth,s[r].clickDateFlag=angular.isUndefined(t.clickDateFlag)?s[r].confg.clickDateFlag:t.clickDateFlag,s[r].clickDateHide=angular.isUndefined(t.clickDateHide)?s[r].confg.clickDateHide:t.clickDateHide,j(),B()};var h=function(t){return t instanceof Date||void m("不是时间类型")},m=function(t){throw new Error(t)},p=function(t,e){if(h(t)){var a=t.getFullYear(),n=t.getMonth()+e,c=t.getDate();return new Date(a,n,c)}},v=function(t,e){if(h(t)){if(0!==e&&e>0&&e<31){var a=t.getFullYear(),n=t.getMonth(),c=e;return new Date(a,n,c)}m("设置的日期有错误，不能小于等于0 不能大于31")}},D=function(t){var e=0;if(h(t)){var a=t.getFullYear(),n=t.getMonth()+1;e=new Date(a,n,0).getDate()}return e},k=function(t){var e="";if(h(t)){switch(t.getDay()){case 1:e="Monday";break;case 2:e="Tuesday";break;case 3:e="Wednesday";break;case 4:e="Thursday";break;case 5:e="Friday";break;case 6:e="Saturday";break;case 0:e="Sunday"}return e}},w=function(e){s[r].callback.onClickDate(e),e.active&&(s[r].confg.clickDateFlag?(s[r].confg.default=e.date,s[r].check=e.date,S(),s[r].callback.onChangeDate(e),s[r].confg.clickDateHide&&x()):t.template.check=e.date)},y=function(){s[r].confg.default=t.template.check,S(),s[r].callback.onChangeDate(t.template.check),s[r].confg.clickDateHide&&x()},b=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeYear){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e+t,a,n),j()}},F=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeYear){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e-t,a,n),j()}},M=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeMonth){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e,a+t,n),j()}},Y=function(t){if(t<0?t=-t:0===t&&(t=1),s[r].confg.changeMonth){var e=s[r].confg.default.getFullYear(),a=s[r].confg.default.getMonth(),n=s[r].confg.default.getDate();s[r].confg.default=new Date(e,a-t,n),j()}},S=function(){var e=l("date")(s[r].confg.default,s[r].confg.outFormat);t[s[r].module]=e},U=function(l){var o=c(n.get("calendar/index.html"))(t);e.find("body").append(o),a(function(){t.template.templateShow=!0,l()},100)},x=function(){var n=angular.element(e.find("body")[0].lastChild);t.template.templateShow=!1,a(function(){n[0].id.indexOf("calendar-share-warp")!==-1?angular.element(n).remove():(n=document.getElementById("calendar-share-warp"),angular.element(n).remove()),s[r].callback.onHide()},200)},C=function(t){return!(s[r].confg.minDate&&h(s[r].confg.minDate)&&t<s[r].confg.minDate)&&!(s[r].confg.maxDate&&h(s[r].confg.maxDate)&&t>s[r].confg.maxDate)},H=function(t,e,a){for(var n=D(p(s[r].confg.default,-1)),c=u[k(v(s[r].confg.default,1))],l=c-1,o=0;l>0;l--,o++){var d={};d.monthFlag="before",d.week=g[l-1],l===c?(d.value=n,d.date=new Date(e,a-2,n-o)):(d.value=n-o,d.date=new Date(e,a-2,n-o)),d.active=C(d.date),t.push(d)}return t.reverse(),t},$=function(e,a,n){for(var c=D(s[r].confg.default),l=u[k(v(s[r].confg.default,1))],o=l,d=s[r].confg.default.getDate(),i=0;i<c;i++){var f={};0===i||(o++,o>7&&(o=1)),f.monthFlag="now",f.week=g[o],f.value=i+1,f.date=new Date(a,n-1,i+1),i+1===d&&(f.now=!0,t.template.check=f.date),f.active=C(f.date),e.push(f)}return e},T=function(t,e,a){for(var n=p(s[r].confg.default,1),c=u[k(v(n,1))],l=t.length,o=l,d=0;o<42;o++,d++){var i={};o!==l&&(c++,c>7&&(c=1)),i.monthFlag="atter",i.week=g[c],i.value=d+1,i.date=new Date(e,a,d+1),i.active=C(i.date),t.push(i)}return t},j=function(){var e=[],a=s[r].confg.default.getFullYear(),n=s[r].confg.default.getMonth()+1;e=H(e,a,n),e=$(e,a,n),e=T(e,a,n),t.template.year=a,t.template.month=n,t.template.date=e},B=function(){t.template.hide=x,t.template.checkDate=w,t.template.determine=y,t.template.addYear=b,t.template.reduceYear=F,t.template.addMonth=M,t.template.reduceMonth=Y},I=function(t,e){S(),o[0].setAttribute("readonly",!0),o[0].className="user-select-off",o[0].onclick=function(e){r=angular.element(e.target)[0].getAttribute("calendar"),t(),j(),U(s[r].callback.onShow),B()},e(s[r].method)};I(s[r].callback.onInit,s[r].callback.onBackObj)}}}];